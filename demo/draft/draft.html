<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽</title>
	<style>
	*{
		margin:0;
		padding: 0;
	}
		.box{
			width:300px;
			height:50px;
			background:#eee;
			border-radius: 25px;
			margin:40px auto;
			position: relative;
			text-align: center;
			line-height: 50px;

		}
		.box p{
			
			width:50px;
			height: 50px;
			border-radius: 25px;
			background:#2196f3;
			position: absolute;
			top:0;
			left:0;
			cursor: move;
			

		}
	</style>
</head>
<body>
	<div class="box" id="box">
	请滑动解锁

	<p></p>
	
	</div>
	<script>
		
	var box = document.getElementById("box");
	var circle = box.getElementsByTagName("p")[0];
	circle.onmousedown=function(e){

	
		document.onmousemove =function(e){
			if(e.pageX - box.offsetLeft < 0){return circle.style.left = 0}
			if(e.pageX - box.offsetLeft > box.offsetWidth -circle.offsetWidth){return circle.style.left = box.offsetWidth -circle.offsetWidth+"px"}
				circle.style.left = e.pageX - box.offsetLeft +"px";
			}
			
		

	
  document.onmouseup =function(){
  			if(circle.offsetLeft !== box.offsetWidth -circle.offsetWidth){circle.style.left = 0;}
  			if(circle.offsetLeft === box.offsetWidth -circle.offsetWidth){box.innerHTML = "解锁成功！";}
            document.onmousemove = null;
            document.onmouseup = null;
	}
}
	
	//放大镜
	// box.onmouseover = function(){
	// 	 circle.style.display = "block"

	// }
	// box.onmouseout = function(){
	// 	 circle.style.display = "none";
		

	// }
	// box.onmousemove =function(e){
	// 	 if(e.pageX-box.offsetLeft<circle.offsetWidth/2 && e.pageY-box.offsetTop < circle.offsetHeight/2 )return 

	// 	// if(e.pageX-box.offsetLeft >box.offsetLeft+box.offsetWidth-60 || e.pageY-box.offsetTop >box.offsetTop +box.offsetTop -60) return;
	// 	if(e.pageX-box.offsetLeft-circle.offsetHeight/2 > box.offsetWidth-circle.offsetWidth) return
	// 	 circle.style.left =e.pageX-box.offsetLeft-circle.offsetHeight/2+"px";
	// 	 circle.style.top =e.pageY-box.offsetTop-circle.offsetWidth/2+"px";
		
	

	// }

	
	
	



	function getbyclass(parent,cla){
		var claarr = [];
		var childrens = parent.getElementsByTagName("*");
		for(var i =0;i<childrens.length;i++){

			if(childrens[i].className === cla ){
				claarr.push(childrens[i])
			}
		}
		return claarr;
	}


	</script>
</body>
</html>